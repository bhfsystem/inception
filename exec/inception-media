#!/usr/bin/env bash

function main {
  local shome="${_inception_home:-"$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"}"
  source "$shome/script/profile"
  source inception_common

  set -x

  $INCEPTION clean

  runmany 'plane $1 rebase' virtualbox vmware parallels
  runmany 'plane $1 reuse vagrant' virtualbox vmware parallels

  $INCEPTION clean

  plane virtualbox recycle
  plane virtualbox docker image rebase
  plane virtualbox docker image reuse

  $INCEPTION clean

  runmany 'plane $1 recycle' virtualbox vmware parallels
  runmany 'plane $1 docker image import; plane $1 reuse' virtualbox vmware parallels

  $INCEPTION clean

  runmany 'plane $1 recycle; plane $1 destroy -f' virtualbox vmware parallels
}

source sub "$BASH_SOURCE" "$@"
