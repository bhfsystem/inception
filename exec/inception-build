#!/usr/bin/env bash

function main {
  local shome="${_inception_home:-"$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"}"
  source "$shome/script/profile"

  for a in $PLANE $VAN $HOTEL $SNOW; do
    $a update
    case "$a" in
      $PLANE)
        runmany 1 'docker machine rm -f $1 2>&- || true; $1 recycle; $1 swarm primary' $PLANE
        $INCEPTION network create inception || true
        ;;
      
      *)
        docker machine rm -f $a 2>&- || true
        $a recycle
        $a swarm node
        ;;
    esac
  done

  docker machine ls
}

source sub "$BASH_SOURCE" "$@"
