#!/usr/bin/env bash

function main {
  local shome="${_inception_home:-"$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"}"
  source "$shome/script/profile"
  source inception_common

  if [[ "$#" == 0 ]]; then
    set -- van virtualbox hotel virtualbox snow virtualbox
  fi

  export LIMBO_LINKED_CLONES=1

  while [[ "$#" != 0 ]]; do
    if [[ "$#" == 1 ]]; then
      set -- "$@" virtualbox
    fi

    a="$1"; shift
    b="$1"; shift

    $a $b recycle
    $a $b lxd init
    $a $b docker init
    $a $b network init
  done
}

source sub "$BASH_SOURCE" "$@"
