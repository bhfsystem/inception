#!/usr/bin/env bash

function main {
  local shome="${_inception_home:-"$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"}"
  source "$shome/script/profile"
  source inception_common

  if [[ "$#" == 0 ]]; then
    set -- van hotel snow
  fi

  export LIMBO_LINKED_CLONES=1

  for a in "$@"; do
    case "$a" in
      virtualbox|van) 
        van virtualbox recycle
        docker machine rm -f van  2>&- ||  true
        ;;

      vmware|hotel) 
        hotel vmware recycle
        docker machine rm -f hotel 2>&- ||  true
        ;;

      parallels|snow) 
        snow parallels recycle
        docker machine rm -f snow 2>&- ||  true
        ;;
    esac
  done
}

source sub "$BASH_SOURCE" "$@"
